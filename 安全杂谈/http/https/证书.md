#### 证书格式

* X.509：X.509是数字证书的国际标准格式，广泛用于SSL/TLS协议中。它定义了证书的结构，包括证书的各个部分（如持有者信息、公钥、颁发者信息、有效期等）以及如何进行数字签名
* `.cer`、`.crt`、`.pem`（如果使用Base64编码）、`.der`（如果使用二进制编码）

#### 证书内容

```txt
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            57:64:a3:88:18:b5:70:57:e8:5e:99:b5:37:48:06:8a:31:1f:03:70
        Signature Algorithm: ecdsa-with-SHA384
        Issuer: O=Grandstream Networks, Inc., CN=Grandstream Networks CA
        Validity
            Not Before: May 21 05:51:55 2025 GMT
            Not After : May 15 05:51:55 2050 GMT
        Subject: C=US, ST=California, L=City of Industry, O=Grandstream Networks, Inc., OU=Software Engineering, CN=EC74D79D8C06, emailAddress=support@grandstream.com
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (384 bit)
                pub:
                    04:84:7e:ea:57:52:57:a6:61:75:8b:9d:e4:56:a1:
                    26:24:29:48:f3:08:e3:c0:48:87:b6:0c:31:f0:d1:
                    af:62:b3:41:7f:2a:39:7e:d5:cd:37:e5:ee:57:9c:
                    59:f7:2e:73:f3:06:ad:f4:55:0d:5e:d7:ff:b5:46:
                    20:38:a2:b4:34:d8:a4:8a:81:a5:75:d9:32:d6:1f:
                    1b:0f:a8:1b:01:26:59:b7:9c:8a:1d:52:80:e7:e0:
                    aa:64:60:2e:90:37:9e
                ASN1 OID: secp384r1
                NIST CURVE: P-384
        X509v3 extensions:
            1.3.6.1.4.1.42397.1.1.1:
                .$1a42dc37-0775-41dd-b135-220f6b31ef93
            1.3.6.1.4.1.42397.1.1.2:
                ..Grandstream Networks, Inc.
            1.3.6.1.4.1.42397.1.1.3:
                ..GDS3726
            1.3.6.1.4.1.42397.1.1.4:
                .*SMART DOOR STATION,GDS3726_V1.3 PRODUCTION
            1.3.6.1.4.1.42397.1.1.5:
                ..
            1.3.6.1.4.1.42397.1.1.6:
                ..EC74D79D8C06
            X509v3 Subject Key Identifier:
                23:CF:2F:80:9C:2D:77:70:1E:73:60:7D:23:57:91:1B:87:78:5B:5B
            X509v3 Authority Key Identifier:
                keyid:84:64:09:9C:B1:AA:D2:CD:85:CA:6C:77:AD:68:D4:EF:34:FE:23:E8
                DirName:/O=Grandstream Networks, Inc./CN=Grandstream Networks Root CA
                serial:7F:CE:DB
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment, Key Agreement
            X509v3 Extended Key Usage:
                TLS Web Server Authentication, TLS Web Client Authentication
            X509v3 Subject Alternative Name:
                DNS:EC74D79D8C06.local
    Signature Algorithm: ecdsa-with-SHA384
    Signature Value:
        30:64:02:30:5a:db:99:47:30:78:d9:de:eb:40:ab:a0:86:89:
        fc:50:56:a5:fb:f8:fa:d8:19:de:16:fa:be:48:bf:3d:27:53:
        fe:ff:3f:74:76:c4:b9:78:57:88:17:53:18:0e:7d:a9:02:30:
        71:39:42:a6:2f:ba:f0:05:ad:dd:56:2f:ae:e6:35:84:01:20:
        11:66:5f:98:67:28:14:1d:93:e7:25:fd:9c:d6:e1:5f:6d:b7:
        73:7f:5b:e6:ed:8d:a1:b8:28:ba:f4:2a
```

1. **Version: 3 (0x2)**

- **说明**：证书版本号。X.509证书有多个版本，其中版本3是当前常用的版本。
  - **版本 1**：只包含证书持有者的公钥和基本信息。
  - **版本 2**：包含了证书扩展（扩展内容较少）。
  - **版本 3**：支持更多的扩展（比如使用扩展密钥用途、证书吊销列表、主题备用名称等）。

2. **Serial Number**

- **说明**：证书的序列号，`57:64:a3:88:18:b5:70:57:e8:5e:99:b5:37:48:06:8a:31:1f:03:70`。
  - **作用**：每个证书都有唯一的序列号。它用于识别证书和防止伪造。
  - **生成**：通常由证书颁发机构（CA）生成，并在每个证书中保证唯一。

3. **Signature Algorithm: ecdsa-with-SHA384**

- **说明**：该证书使用的签名算法是**ECDSA（椭圆曲线数字签名算法）\**结合\**SHA384**。
  - **ECDSA**是一种基于椭圆曲线的数字签名算法，效率较高，密钥长度较小，常用于现代加密系统。
  - **SHA384**是SHA-2系列中的一种散列算法，用于生成数字签名的摘要。

4. **Issuer**

- **说明**：证书颁发者（CA）的信息。
  - **Issuer: O=Grandstream Networks, Inc., CN=Grandstream Networks CA**
  - 这里显示的是证书颁发机构的名称，颁发者是**Grandstream Networks, Inc.**，它的公共名称（CN）是**Grandstream Networks CA**。

5. **Validity**

- **说明**：证书的有效期，包括生效时间和过期时间。
  - **Not Before: May 21 05:51:55 2025 GMT**：证书的生效时间。
  - **Not After : May 15 05:51:55 2050 GMT**：证书的过期时间。

6. **Subject**

- **说明**：证书的主体（即证书持有者）信息。
  - **Subject: C=US, ST=California, L=City of Industry, O=Grandstream Networks, Inc., OU=Software Engineering, CN=EC74D79D8C06, emailAddress=support@grandstream.com**

#### 证书验证过程

当客户端（比如浏览器）收到一份证书时，它需要确认：

1. 这份证书的 **数字签名正确**（没有被篡改）。
2. 这份证书是由一个 **可信任的CA签发**（证书链校验）。
3. 证书仍然在 **有效期内**（没过期）。
4. 证书 **没被吊销**（CRL 或 OCSP）。
5. 证书的用途和域名/IP 等信息 **与实际使用场景匹配**。



* 签名的验证过程（验证证书是不是合法的）
  * 对数据部分按照证书声明的方式进行hash
  * 使用证书中声明的CA公钥对签名进行解密，对比解密出的hash和计算出的hash
    * 这要证书中声明的CA是被解密方所信任的



#### 证书如何防止篡改和伪造

#### tls