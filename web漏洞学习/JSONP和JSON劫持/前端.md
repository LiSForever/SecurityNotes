### 同源策略

#### 同源限制

* 什么是同源：(protocol, host, port) 相同即同源
* 一个注意点：同源策略禁止JS跨域读取资源。注意加载资源和读取资源是不同的，`<script>` `<img>`等标签利用src是可以跨域加载资源的，但是他们加载的资源并不能被JavaScript读取到 

#### 允许的跨域

![image-20240307185236239](.\images\image-20240307185236239.png)

### 跨域策略

#### JSONP

 JSONP（JSON with Padding）是一种绕过浏览器同源策略的技术，用于在网页上进行跨域数据请求，如今已不常用，被CORS所替代。JSONP的主要思想是利用 `<script>` 标签的跨域特性，通过动态创建 `<script>` 标签，将跨域请求作为脚本引入，从而绕过浏览器的同源策略。

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JSONP Example</title>
</head>
<body>

<script>
  function handleResponse(data) {
    // 处理返回的数据
    console.log(data);
  }
</script>

<script src="https://example.com/data.json?callback=handleResponse"></script>

</body>
</html>
```

```javascript
// <script src="https://example.com/data.json?callback=handleResponse"></script>的响应
handleResponse({"username":"admin","password":"123456"})
```

  上面

#### CORS

### 三大基石

* SameSite
* HttpOnly
* Secure

### Cookie跨域

### 漏洞

* CSRF
* JSONP劫持
* CORS配置不当